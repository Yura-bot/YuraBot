<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/header'); %>
    <title>Yura | Serveur</title>
</head>

<body>

    <div class="tap-top"><i data-feather="chevrons-up"></i></div>
    <div class="page-wrapper compact-wrapper" id="pageWrapper">
      <%- include('../partials/headbar'); %>
      <div class="page-body-wrapper sidebar-icon">
        <%- include('../partials/nav'); %>
        <div class="page-body">
          <div class="container-fluid">
            <div class="page-header">
              <div class="row">
                <div class="col-6">
                  <h3>
                    <%= guild.name %></h3>
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/"><i data-feather="home"></i></a></li>
                    <li class="breadcrumb-item">Dashboard Yura</li>
                  </ol>
                </div>
              </div>
            </div>
          </div>

          <!-- Container-fluid starts-->
          <div class="container-fluid">
            <div class="row">
              <div class="col-sm-12">

                <% if(alert) { %>
                  <div class="alert alert-success outline alert-dismissible fade show" role="alert">
                    <p><i data-feather="thumbs-up"></i><b>&ensp; Bien jou√© ! </b>Les donn√©es ont √©t√© sauvegard√©es !</p>
                    <button class="close" type="button" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">√ó</span></button>
                  </div>

                <% } %>

                <div class="card">
                  <div class="card-header">
                    <h5>üìö Configuration du syst√®me de ticket :</h5>
                  </div>
                  <form class="form theme-form" method="POST">
                    <div class="card-body">

                      <% if(isTicket === false) { %>
                        <div class="media">
                          <label class="col-form-label m-r-10">D√©sactiv√© !</label>
                          <div class="media-body icon-state switch-outline">
                            <label class="switch">
                              <input type="checkbox" name="statusTicket"><span class="switch-state bg-success"></span>
                            </label>
                          </div>
                        </div>
                      <% } else { %>
                        <div class="media">
                          <label class="col-form-label m-r-10">Activ√© !</label>
                          <div class="media-body icon-state switch-outline">
                            <label class="switch">
                              <input type="checkbox" checked="" name="statusTicket"><span class="switch-state bg-success"></span>
                            </label>
                          </div>
                        </div>
                      <% } %>

                      <br>

                      <div class="row">
                        <div class="col">
                          <div class="form-group">
                            <label for="category">Cat√©gorie :</label>
                            <select class="form-control digits" id="category" name="category">

                            <% if(isTicket && bot.channels.cache.has(category)){ %>
                                <option selected="selected">#<%= bot.channels.cache.get(category).name %></option>
                                <% guild.channels.cache.filter((ch) => ch.id !== category && ch.type === "category").forEach((ch) => { %>
                                    <option>#<%= ch.name %></option>
                                <% }); } else { %>
                                <option selected="selected">#<%= guild.channels.cache.filter((ch) => ch.type === "category").first().name %></option>
                                <% guild.channels.cache.filter((ch) => ch.id !== guild.channels.cache.first().id && ch.type === "category").forEach((ch) => { %>
                                    <option>#<%= ch.name %></option>
                                <% }); %>
                            <% } %>

                            </select>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col">
                          <div class="form-group">
                            <label for="channel">Salon :</label>
                            <select class="form-control digits" id="channel" name="channel">

                            <% if(isTicket && bot.channels.cache.has(channel)){ %>
                                <option selected="selected">#<%= bot.channels.cache.get(channel).name %></option>
                                <% guild.channels.cache.filter((ch) => ch.id !== channel && ch.type === "text").forEach((ch) => { %>
                                    <option>#<%= ch.name %></option>
                                <% }); } else { %>
                                <option selected="selected">#<%= guild.channels.cache.filter((ch) => ch.type === "text").first().name %></option>
                                <% guild.channels.cache.filter((ch) => ch.id !== guild.channels.cache.first().id && ch.type === "text").forEach((ch) => { %>
                                    <option>#<%= ch.name %></option>
                                <% }); %>
                            <% } %>

                            </select>
                          </div>
                        </div>
                      </div>

                      <div class="form-group">
                        <label>Support role :</label>
                        <select class="form-control" name="role">
                            <% if(isTicket && guild.roles.cache.has(role)){ %>
                                <option selected="selected">@<%= guild.roles.cache.get(role).name %></option>
                                <% guild.roles.cache.filter((r) => r.id !== role && r.name !== "@everyone").forEach((r) => { %>
                                    <option>@<%= r.name %></option>
                                <% }); } else { %>
                                <option selected="selected">@<%= guild.roles.cache.filter((r) => r.name !== "@everyone").first().name %></option>
                                <% guild.roles.cache.filter((r) => r.id !== guild.roles.cache.filter((r) => r.name !== "@everyone").first().id && r.name !== "@everyone").forEach((r) => { %>
                                    <option>@<%= r.name %></option>
                                <% }); %>
                            <% } %>
                        </select>
                    </div>

                    </div>

                    <div class="card-footer">
                      <button class="btn btn-primary" type="submit">Sauvegarder</button>
                    </div>
                  </form>
                </div>

              </div>
            </div>
          </div>
          <!-- Container-fluid Ends-->
        </div>
        <%- include('../partials/footer'); %>
      </div>
    </div>
    
    <script src="/js/jquery-3.5.1.min.js"></script>

    <script src="/js/bootstrap/popper.min.js"></script>
    <script src="/js/bootstrap/bootstrap.js"></script>

    <script src="/js/icons/feather-icon/feather.min.js"></script>
    <script src="/js/icons/feather-icon/feather-icon.js"></script>

    <script src="/js/sidebar-menu.js"></script>
    <script src="/js/config.js"></script>

    <script src="/js/height-equal.js"></script>
    <script src="/js/tooltip-init.js"></script>

    <script src="/js/theme-customizer/customizer.js"></script>

  </body>

</html>